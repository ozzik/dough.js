/*! Dough.js - by Oz Pinhas @ 2013 (Version 1.0)
 *  https://github.com/ozzik/dough.js
 *  Licensed under the MIT license. */
(function(k){function b(){}var j={},a=1,g=document.createElement("div"),l;l={find:function(n,p){var r=new b(),q=[];if(typeof n==="string"){q=(p||document).querySelectorAll(n)}else{if(n instanceof NodeList||Array.isArray(n)){q=n}else{if(n instanceof HTMLElement){q[0]=n}}}for(var o=0,m=q.length;o<m;o++){r[o]=q[o]}r.length=q.length;return r},each:function(p,o,m){for(var n=0;n<p.length;n++){o(p[n],m)}},edit_classes:function(r,p,o){o=o.split(" ");for(var n=0;n<r.length;n++){for(var m=0,q=o.length;m<q;m++){r[n].classList[p](o[m])}}},parse_content:function(p){var q,n=[];if(p instanceof HTMLElement){return[p]}else{g.innerHTML=p;q=g.childNodes;for(var o=0,m=q.length;o<m;o++){n[o]=q[o]}return n}},get_sibling:function(o,m){var n=(m?"next":"previous")+"Sibling",i=o[n];while(i&&i.nodeType!==Node.ELEMENT_NODE){i=i[n]}return i},add_http_parameter:function(m,n,i){return(m?m+"&":"")+n+"="+i},generate_http_parameters:function(p){var n=Object.keys(p),q="";for(var o=0,m=n.length;o<m;o++){q=l.add_http_parameter(q,n[o],p[n[o]])}return q}};function d(m,i){m+=(i)?" god damned it!":"";console.warn?console.warn(m):console.log(m)}b.prototype={find:function(i){return l.find(i,this[0])},next:function(){return h(l.get_sibling(this[0],true))},previous:function(){return h(l.get_sibling(this[0]))},addClass:function(i){l.edit_classes(this,"add",i.trim());return this},removeClass:function(i){l.edit_classes(this,"remove",i.trim());return this},toggleClass:function(i){l.edit_classes(this,"toggle",i.trim());return this},hasClass:function(p){var o=true;p=p.split(" ");for(var n=0,m=p.length;n<m&&o;n++){o=o&&this[0].classList.contains(p[n])}return o},css:function(p,q){var o=[];if(typeof p==="object"){o=Object.keys(p)}else{o=[p];p={};p[o[0]]=q?q:""}for(var n=0;n<this.length;n++){for(var m=0,r=o.length;m<r;m++){this[n].style[o[m]]=p[o[m]]}if(!p){this[n].removeAttribute("style")}}},attr:function(m,o){for(var n=0;n<this.length;n++){this[n][(o?"set":"remove")+"Attribute"](m,o)}},html:function(n){if(n===undefined){d("Use .innerHTML",true);return}for(var m=0;m<this.length;m++){this[m].innerHTML=n}},before:function(o){o=l.parse_content(o);for(var n=0;n<this.length;n++){for(var m=0,p=o.length;m<p;m++){this[n].parentNode.insertBefore(o[m].cloneNode(true),this[n])}}},after:function(p){var m;p=l.parse_content(p);for(var o=0;o<this.length;o++){m=l.get_sibling(this[o],true);for(var n=0,q=p.length;n<q;n++){if(m){this[o].parentNode.insertBefore(p[n].cloneNode(true),m)}else{this[o].parentNode.appendChild(p[n].cloneNode(true))}}}},on:function(p,o,m){for(var n=0;n<this.length;n++){if(!this[n]._crumb){this[n]._crumb=a++}else{if(j[this[n]._crumb][p]){b.prototype.off.apply(this,[p])}}j[this[n]._crumb]=j[this[n]._crumb]||{};j[this[n]._crumb][p]=o;this[n].addEventListener(p,o,m&&m.isCapture)}},off:function(n){for(var m=0;m<this.length;m++){if(this[m]._crumb&&j[this[m]._crumb][n]){this[m].removeEventListener(n,j[this[m]._crumb][n]);delete j[this[m]._crumb][n]}}},trigger:function(n){for(var m=0;m<this.length;m++){if(this[m]._crumb&&j[this[m]._crumb][n]){j[this[m]._crumb][n]()}}},each:function(n){for(var m=0;m<this.length;m++){n(this[m])}return this}};if(document.body.classList){l.edit_classes=function(t,o,m){var u,n,q;m=m.split(" ");for(var r=0,s=m.length;r<s;r++){u=new RegExp("\\b"+m[r]+"\\b");n=new RegExp("( \\b"+m[r]+"\\b|\\b"+m[r]+"\\b |^"+m[r]+"$)");for(var p=0;p<t.length;p++){q=u.test(t[p].className);if((o==="add"||o==="toggle")&&!q){t[p].className+=(t[p].className?" ":"")+m[r]}else{if((o==="remove"||o==="toggle")&&q){t[p].className=t[p].className.replace(n,"")}}}}};b.prototype.hasClass=function(p){var q,o=true;p=p.split(" ");for(var n=0,m=p.length;n<m&&o;n++){q=new RegExp("\\b"+p[n]+"\\b");o=o&&q.test(this[0].className)}return o}}h.ajax=function(o){var m=new XMLHttpRequest(),n="",i=(o.contentType===undefined||o.contentType==="application/json");o.type=o.type.toLowerCase();o.contentType=(i)?"application/json":o.contentType;o.contentType=(o.type!=="get")?"application/x-www-form-urlencoded":o.contentType;o.charset=(o.charset)?o.charset:"UTF-8";m.open(o.type,o.url,true);m.setRequestHeader("Content-Type",o.contentType+";charset="+o.charset);m.onreadystatechange=function(){if(m.readyState===4){if(m.status===200){var p;if(i){try{p=JSON.parse(m.responseText)}catch(q){o.parseError?o.parseError(m.status):d("Dough JSON parsing error: "+q.name+" - "+q.message+". You should handle this error with a .parseError method",true);return}}o.success((i)?p:m.responseText)}else{o.error?o.error(m.status):d("Dough AJAX error: Returned "+m.status+". You should handle this error with a .error method",true)}}};if(typeof o.data==="object"&&o.type!=="get"){n=l.generate_http_parameters(o.data)}m.send(n)};var c=["get","post","put","delete"];for(var e=0,f=c.length;e<f;e++){(function(i){h[i]=function(m){m.type=i;h.ajax(m)}})(c[e])}h.jsonp=function(m){var i=document.createElement("script");
i.src=m.url+"?"+(m.callbackParam?m.callbackParam:"callback")+"="+m.callback+(m.data?"&"+l.generate_http_parameters(m.data):"");i.type="text/javascript";document.head.appendChild(i)};function h(i){return l.find(i)}window["$"]=(!window["$"])?h:window["$"];window.Dough=h})(window);