/*! Dough.js - by Oz Pinhas @ 2013 (Version 1.0)
 *  https://github.com/ozzik/dough.js
 *  Licensed under the MIT license. */
 (function(e){function t(){}function f(e,n){var r=new t,i=[];if(typeof e==="string"){i=(n||document).querySelectorAll(e)}else if(e instanceof NodeList||Array.isArray(e)){i=e}else if(e instanceof HTMLElement){i[0]=e}for(var s=0,o=i.length;s<o;s++){r[s]=i[s]}r.length=i.length;return r}function l(e,t,n,r){for(var i=n||0,s=n!==undefined?n+1:e.length;i<s;i++){t(e[i],r)}}function c(e,t,n,r){n=n.split(" ");l(e,function(e){for(var r=0,i=n.length;r<i;r++){e.classList[t](n[r])}},r)}function h(e){var t,n=[];if(e instanceof HTMLElement){return[e]}else{i.innerHTML=e;t=i.childNodes;for(var r=0,s=t.length;r<s;r++){n[r]=t[r]}return n}}function p(e,t){var n=(t?"next":"previous")+"Sibling",r=e[n];while(r&&r.nodeType!==Node.ELEMENT_NODE){r=r[n]}return r}function d(e,i,s,o){if(!e._crumb){e._crumb=r++}else if(n[e._crumb][i]){t.prototype.off.apply(this,[i])}n[e._crumb]=n[e._crumb]||{};n[e._crumb][i]=s;e.addEventListener(i,s,o&&o.isCapture)}function v(e,t,n){return(e?e+"&":"")+t+"="+n}function m(e){var t=Object.keys(e),n="";for(var r=0,i=t.length;r<i;r++){n=v(n,t[r],e[t[r]])}return n}function g(e,t){e+=t?" god damned it!":"";console.warn?console.warn(e):console.log(e)}function y(){var e=navigator.userAgent,t="";if(e.indexOf("webkit")){t="webkit"}else if(e.indexOf("Firefox")){t="moz"}return t}function S(e){return f(e)}var n={},r=1,i=document.createElement("div"),s,o,u,a;t.prototype={find:function(e){return f(e,this[0])},next:function(){return S(p(this[0],true))},previous:function(){return S(p(this[0]))},addClass:function(e,t){c(this,"add",e.trim(),t);return this},removeClass:function(e,t){c(this,"remove",e.trim(),t);return this},toggleClass:function(e,t,n){var r=t===undefined?"toggle":t?"add":"remove";c(this,r,e.trim(),n);return this},hasClass:function(e){var t=true;e=e.split(" ");for(var n=0,r=e.length;n<r&&t;n++){t=t&&this[0].classList.contains(e[n])}return t},css:function(e,t,n){var r=[];if(typeof e==="object"){r=Object.keys(e);n=t}else{r=[e];e={};e[r[0]]=t?t:""}l(this,function(t){for(var n=0,i=r["length"];n<i;n++){t.style[r[n]]=e[r[n]]}if(!e){t.removeAttribute("style")}},n);return this},transform:function(e,t){l(this,function(t){t.style[s+"Transform"]=e},t)},translate:function(e,t,n,r){l(this,function(r){r.style[s+"Transform"]="translate3d("+(e||0)+"px,"+(t||0)+"px,"+(n||0)+"px)"},r)},reset_translate:function(e){l(this,function(e){e.style[s+"Transform"]=""},e)},attr:function(e,t,n){l(this,function(n){n[(t!==undefined?"set":"remove")+"Attribute"](e,t)},n);return this},html:function(e,t){if(e===undefined){log("Use .innerHTML",true);return}l(this,function(t){t.innerHTML=e},t);return this},before:function(e,t){e=h(e);l(this,function(t){for(var n=0,r=e.length;n<r;n++){t.parentNode.insertBefore(e[n].cloneNode(true),t)}},t);return this},after:function(e,t){var n;e=h(e);l(this,function(t){n=p(t,true);for(var r=0,i=e.length;r<i;r++){if(n){t.parentNode.insertBefore(e[r].cloneNode(true),n)}else{t.parentNode.appendChild(e[r].cloneNode(true))}}},t);return this},on:function(e,t,n,r){r=typeof n!=="object"?n:r;l(this,function(r){d(r,e,t,n)},r);return this},off:function(e,t){l(this,function(t){if(t._crumb&&n[t._crumb][e]){t.removeEventListener(e,n[t._crumb][e]);delete n[t._crumb][e]}},t);return this},trigger:function(e,t){l(this,function(t){if(this[w]._crumb&&n[this[w]._crumb][e]){n[this[w]._crumb][e]()}},t);return this},click:function(e,t){this.on(o,function(e){e.preventDefault();this._$e=$(this);this._startX=_isTouch?e.touches[0].pageX:e.pageX;this._startY=_isTouch?e.touches[0].pageY:e.pageY;this._didMove=false;this._isPointerDown=true;this._$e.addClass("pressed")},t);this.on(u,function(e){if(!this._isPointerDown){return}var t=_isTouch?e.touches[0].pageX:e.pageX,n=_isTouch?e.touches[0].pageY:e.pageY;this._didMove=Math.abs(t-this._startX)>=10||Math.abs(n-this._startY)>=10;if(this._didMove&&this._$e){this._$e.removeClass("pressed")}},t);this.on(a,function(t){this._isPointerDown=false;if(!this._didMove){this._$e.removeClass("pressed");e(this._$e)}},t);return this},each:function(e){for(var t=0;t<this.length;t++){e(this[t])}return this}};if(!document.body["classList"]){c=function(e,t,n){var r,i;n=n.split(" ");for(var s=0,o=n.length;s<o;s++){r=new RegExp("( \\b"+n[s]+"\\b|\\b"+n[s]+"\\b |^"+n[s]+"$)");for(var u=0;u<e.length;u++){i=r.test(e[u].className);if((t==="add"||t==="toggle")&&!i){e[u].className+=(e[u].className?" ":"")+n[s]}else if((t==="remove"||t==="toggle")&&i){e[u].className=e[u].className.replace(r,"")}}}};t.prototype.hasClass=function(e){var t,n=true;e=e.split(" ");for(var r=0,i=e.length;r<i&&n;r++){t=new RegExp("( \\b"+e[r]+"\\b|\\b"+e[r]+"\\b |^"+e[r]+"$)");n=n&&t.test(this[0].className)}return n}}s=y();_isTouch="ontouchstart"in document;o=_isTouch?"touchstart":"mousedown";u=_isTouch?"touchmove":"mousemove";a=_isTouch?"touchend":"mouseup";S.engine=s;S.parseJSON=function(e){var t={isSuccess:false,json:null};try{t.json=JSON.parse(e);t.isSuccess=true}catch(n){t.error=n}return t};S.ajax=function(e){var t=new XMLHttpRequest,n="",r=e.contentType===undefined||e.contentType==="application/json";e.type=e.type.toLowerCase();e.contentType=r?"application/json":e.contentType;e.contentType=e.type!=="get"?"application/x-www-form-urlencoded":e.contentType;e.charset=e.charset?e.charset:"UTF-8";t.open(e.type,e.url,true);t.setRequestHeader("Content-Type",e.contentType+";charset="+e.charset);t.onreadystatechange=function(){if(t.readyState===4){if(t.status===200){var n;if(r){n=S.parseJSON(t.responseText);if(n.isSuccess){n=n.json}else{console.log(n);e.parseError?e.parseError(n.e):g("Dough JSON parsing error: "+n.error.name+" - "+n.error.message+". You should handle this error with a .parseError method",true);return}}e.success(r?n:t.responseText)}else{e.error?e.error(t.status):g("Dough AJAX error: Returned "+t.status+". You should handle this error with a .error method",true)}}};if(typeof e.data==="object"&&e.type!=="get"){n=m(e.data)}t.send(n)};var b=["get","post","put","delete"];for(var w=0,E=b.length;w<E;w++){(function(e){S[e]=function(t){t.type=e;S.ajax(t)}})(b[w])}S.getJSON=function(e){S.get({url:e.url,contentType:"text/plain",success:function(t){var n=S.parseJSON(t);if(n.isSuccess){e.success(n.json)}else{e.parseError?e.parseError(n.error):g("Dough JSON parsing error: "+n.error.name+" - "+n.error.message+". You should handle this error with a .parseError method",true)}},error:function(t){e.error?e.error(t):g("Dough AJAX error: Returned "+t+". You should handle this error with a .error method",true)}})};S.jsonp=function(e){var t=document.createElement("script");t.src=e.url+"?"+(e.callbackParam?e.callbackParam:"callback")+"="+e.callback+(e.data?"&"+m(e.data):"");t.type="text/javascript";document.head.appendChild(t)};window["$"]=!window["$"]?S:window["$"];window["Dough"]=S})(window)