/*! Dough.js - by Oz Pinhas @ 2013 (Version .1)
 *  https://github.com/ozzik/dough.js
 *  Licensed under the MIT license. */
(function(e){function t(){}function p(e,n){var r=new t,i=[];if(typeof e==="string"){i=(n||document).querySelectorAll(e)}else if(e instanceof NodeList||Array.isArray(e)){i=e}else if(e instanceof HTMLElement){i[0]=e}for(var s=0,o=i.length;s<o;s++){r[s]=i[s]}r.length=i.length;return r}function d(e,t,n,r){for(var i=n||0,s=n!==undefined?n+1:e.length;i<s;i++){t(e[i],r)}}function v(e,t,n,r){n=n.split(" ");d(e,function(e){for(var r=0,i=n.length;r<i;r++){e.classList[t](n[r])}},r)}function m(e){var t,n=[];if(e instanceof HTMLElement){return[e]}else{h.innerHTML=e;t=h.childNodes;for(var r=0,i=t.length;r<i;r++){n[r]=t[r]}return n}}function g(e,t){var n=(t?"next":"previous")+"Sibling",r=e[n];while(r&&r.nodeType!==Node.ELEMENT_NODE){r=r[n]}return r}function y(e,i,s,o){if(!e._crumb){e._crumb=r++}else if(n[e._crumb][i]){t.prototype.off.apply(this,[i])}n[e._crumb]=n[e._crumb]||{};n[e._crumb][i]=s;e.addEventListener(i,s,o&&o.isCapture)}function b(e,t,n){return(e?e+"&":"")+t+"="+n}function w(e){var t=Object.keys(e),n="";for(var r=0,i=t.length;r<i;r++){n=b(n,t[r],e[t[r]])}return n}function E(e,t){e+=t?" god damned it!":"";console.warn?console.warn(e):console.log(e)}function S(){var e=navigator.userAgent,t="";if(e.indexOf("webkit")){t="webkit"}else if(e.indexOf("Firefox")){t="moz"}return t}function x(e){if(e==="transform"){return"-"+c+"-transform"}else{return e}}function T(){document.body.addEventListener($.engine+"TransitionEnd",function(e){if(!a[e.propertyName]){return}var t=u[e.target._tCrumb];if(!t){return}t.finished++;if(t.finished==t.required){delete u[e.target._tCrumb];a[e.property]--;t.callback&&t.callback()}});l=true}function L(e){return p(e)}var n={},r=1,i,s,o;var u={},a={},f=1,l,c;var h=document.createElement("div");t.prototype={find:function(e){return p(e,this[0])},next:function(){return L(g(this[0],true))},previous:function(){return L(g(this[0]))},addClass:function(e,t){v(this,"add",e.trim(),t);return this},removeClass:function(e,t){v(this,"remove",e.trim(),t);return this},toggleClass:function(e,t,n){var r="toggle";if(typeof t==="boolean"){r=t?"add":"remove"}else{n=t}v(this,r,e.trim(),n);return this},hasClass:function(e,t){var n=true;e=e.split(" ");for(var r=t||0,i=t!==undefined?t+1:this.length;r<i;r++){for(var s=0,o=e.length;s<o&&n;s++){n=n&&this[r].classList.contains(e[s])}}return n},css:function(e,t,n){var r=[];if(typeof e==="object"){r=Object.keys(e);n=t}else{r=[e];e={};e[r[0]]=t?t:""}d(this,function(t){for(var n=0,i=r["length"];n<i;n++){t.style[r[n]]=e[r[n]]}if(!e){t.removeAttribute("style")}},n);return this},transform:function(e,t){d(this,function(t){t.style[c+"Transform"]=e},t)},translate:function(e,t,n,r){d(this,function(r){r.style[c+"Transform"]="translate3d("+(e||0)+"px,"+(t||0)+"px,"+(n||0)+"px)"},r)},attr:function(e,t,n){d(this,function(n){n[(t!==undefined?"set":"remove")+"Attribute"](e,t)},n);return this},html:function(e,t){if(e===undefined){log("Use .innerHTML",true);return}d(this,function(t){t.innerHTML=e},t);return this},before:function(e,t){e=m(e);d(this,function(t){for(var n=0,r=e.length;n<r;n++){t.parentNode.insertBefore(e[n].cloneNode(true),t)}},t);return this},after:function(e,t){var n;e=m(e);d(this,function(t){n=g(t,true);for(var r=0,i=e.length;r<i;r++){if(n){t.parentNode.insertBefore(e[r].cloneNode(true),n)}else{t.parentNode.appendChild(e[r].cloneNode(true))}}},t);return this},on:function(e,t,n,r){r=typeof n!=="object"?n:r;d(this,function(r){y(r,e,t,n)},r);return this},off:function(e,t){d(this,function(t){if(t._crumb&&n[t._crumb][e]){t.removeEventListener(e,n[t._crumb][e]);delete n[t._crumb][e]}},t);return this},trigger:function(e,t){d(this,function(t){if(this[C]._crumb&&n[this[C]._crumb][e]){n[this[C]._crumb][e]()}},t);return this},click:function(e,t){this.on(i,function(e){e.preventDefault();this._$e=$(this);this._startX=_isTouch?e.touches[0].pageX:e.pageX;this._startY=_isTouch?e.touches[0].pageY:e.pageY;this._didMove=false;this._isPointerDown=true;this._$e.addClass("pressed")},t);this.on(s,function(e){if(!this._isPointerDown){return}var t=_isTouch?e.touches[0].pageX:e.pageX,n=_isTouch?e.touches[0].pageY:e.pageY;this._didMove=Math.abs(t-this._startX)>=10||Math.abs(n-this._startY)>=10;if(this._didMove&&this._$e){this._$e.removeClass("pressed")}},t);this.on(o,function(t){this._isPointerDown=false;if(!this._didMove){this._$e.removeClass("pressed");e(this._$e)}},t);return this},each:function(e){for(var t=0;t<this.length;t++){e(this[t])}return this}};if(!document.body["classList"]){v=function(e,t,n){var r,i;n=n.split(" ");for(var s=0,o=n.length;s<o;s++){r=new RegExp("( \\b"+n[s]+"\\b|\\b"+n[s]+"\\b |^"+n[s]+"$)");for(var u=0;u<e.length;u++){i=r.test(e[u].className);if((t==="add"||t==="toggle")&&!i){e[u].className+=(e[u].className?" ":"")+n[s]}else if((t==="remove"||t==="toggle")&&i){e[u].className=e[u].className.replace(r,"")}}}};t.prototype.hasClass=function(e){var t,n=true;e=e.split(" ");for(var r=0,i=e.length;r<i&&n;r++){t=new RegExp("( \\b"+e[r]+"\\b|\\b"+e[r]+"\\b |^"+e[r]+"$)");n=n&&t.test(this[0].className)}return n}}c=S();_isTouch="ontouchstart"in document;i=_isTouch?"touchstart":"mousedown";s=_isTouch?"touchmove":"mousemove";o=_isTouch?"touchend":"mouseup";L.engine=c;L.parseJSON=function(e){var t={isSuccess:false,json:null};try{t.json=JSON.parse(e);t.isSuccess=true}catch(n){t.error=n}return t};L.ajax=function(e){var t=new XMLHttpRequest,n="",r=e.contentType===undefined||e.contentType==="application/json";e.type=e.type.toLowerCase();e.contentType=r?"application/json":e.contentType;e.contentType=e.type!=="get"?"application/x-www-form-urlencoded":e.contentType;e.charset=e.charset?e.charset:"UTF-8";t.open(e.type,e.url,true);t.setRequestHeader("Content-Type",e.contentType+";charset="+e.charset);t.onreadystatechange=function(){if(t.readyState===4){if(t.status===200){var n;if(r){n=L.parseJSON(t.responseText);if(n.isSuccess){n=n.json}else{console.log(n);e.parseError?e.parseError(n.e):E("Dough JSON parsing error: "+n.error.name+" - "+n.error.message+". You should handle this error with a .parseError method",true);return}}e.success(r?n:t.responseText)}else{e.error?e.error(t.status):E("Dough AJAX error: Returned "+t.status+". You should handle this error with a .error method",true)}}};if(typeof e.data==="object"&&e.type!=="get"){n=w(e.data)}t.send(n)};var N=["get","post","put","delete"];for(var C=0,k=N.length;C<k;C++){(function(e){L[e]=function(t){t.type=e;L.ajax(t)}})(N[C])}L.getJSON=function(e){L.get({url:e.url,contentType:"text/plain",success:function(t){var n=L.parseJSON(t);if(n.isSuccess){e.success(n.json)}else{e.parseError?e.parseError(n.error):E("Dough JSON parsing error: "+n.error.name+" - "+n.error.message+". You should handle this error with a .parseError method",true)}},error:function(t){e.error?e.error(t):E("Dough AJAX error: Returned "+t+". You should handle this error with a .error method",true)}})};L.jsonp=function(e){var t=document.createElement("script");t.src=e.url+"?"+(e.callbackParam?e.callbackParam:"callback")+"="+e.callback+(e.data?"&"+w(e.data):"");t.type="text/javascript";document.head.appendChild(t)};L.transitionEnd=function(e,t,n){!l&&T();e=x(e);f++;var r={id:f,finished:0,required:t.length||1,callback:n};if(!t.length){t._tCrumb=f}else{for(var i=0;i<t.length;i++){t[i]._tCrumb=f}}u[f]=r;if(!a[e]){a[e]=0}a[e]++};window["$"]=!window["$"]?L:window["$"];window["Dough"]=L})(window) 